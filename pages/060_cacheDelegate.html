

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cache Delegate &mdash; Rocket Data 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Rocket Data 1.0 documentation" href="../index.html"/>
        <link rel="next" title="Networking" href="070_networking.html"/>
        <link rel="prev" title="Models" href="050_models.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Rocket Data
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="010_rocketData.html">Rocket Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="015_architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="020_requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="030_dataProviders.html">Data Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="040_setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="050_models.html">Models</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Cache Delegate</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#casting">Casting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#context-parameter">Context Parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#normalized-vs-denormalized-data">Normalized vs Denormalized Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="070_networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="080_updatingModels.html">Updating Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="090_otherFeatures.html">Other Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="095_projections.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="100_coreData.html">Core Data Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="110_threading.html">Threading</a></li>
<li class="toctree-l1"><a class="reference internal" href="120_testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="130_immutability.html">A Case for Immutability</a></li>
<li class="toctree-l1"><a class="reference internal" href="140_FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="150_futurePlans.html">Future Plans</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Rocket Data</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Cache Delegate</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/pages/060_cacheDelegate.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cache-delegate">
<h1>Cache Delegate<a class="headerlink" href="#cache-delegate" title="Permalink to this headline">¶</a></h1>
<p>The cache delegate implements the cache for Rocket Data. You can use any cache you&#8217;d like, but the API is well suited for a key-value store. How you implement the delegate is up to you.</p>
<p>See CacheDelegate.swift for specifics on threading and how to implement this protocol.</p>
<div class="section" id="casting">
<h2>Casting<a class="headerlink" href="#casting" title="Permalink to this headline">¶</a></h2>
<p>The methods in the CacheDelegate are generic with a parameter T: SimpleModel. Given a cacheKey, you should return an element of this class. However, you may not have an initializer for SimpleModel. Instead, you probably have an initializer for your own model superclass (or protocol). For instance:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">class</span> <span class="n">MyModelSuperclass</span> <span class="p">{</span>
  <span class="n">required</span> <span class="n">init</span><span class="p">(</span><span class="n">data</span><span class="o">:</span> <span class="n">Data</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">class</span> <span class="n">Message</span><span class="o">:</span> <span class="n">MyModelSuperClass</span><span class="p">,</span> <span class="n">Model</span> <span class="p">{</span>
  <span class="c1">// Implementation here</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can use the ParsingHelpers to assume that the model requested is a MyModelSuperclass. So, given Data from your cache, you can create a generic Model:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">let</span> <span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="o">:</span> <span class="p">(</span><span class="n">T</span><span class="o">?</span><span class="p">,</span> <span class="n">NSError</span><span class="o">?</span><span class="p">)</span> <span class="o">=</span> <span class="n">ParsingHelpers</span><span class="p">.</span><span class="n">parseModel</span> <span class="p">{</span> <span class="p">(</span><span class="n">aClass</span><span class="o">:</span> <span class="n">MyModelSuperclass</span><span class="p">.</span><span class="n">Type</span><span class="p">)</span> <span class="n">in</span>
  <span class="c1">// Note: here, it will create an instance of type T (e.g. Message or Person)</span>
  <span class="k">return</span> <span class="n">aClass</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These functions in ParsingHelpers can be useful for returning generic models assuming a certain superclass or protocol.</p>
</div>
<div class="section" id="context-parameter">
<h2>Context Parameter<a class="headerlink" href="#context-parameter" title="Permalink to this headline">¶</a></h2>
<p>Whenever you make a change to a DataProvider, you have the option of passing in a context parameter. This context parameter is then returned to the CacheDelegate. This context can be anything, and allows you to implement custom logic for caching or consistency. For instance, you may want to pass in a url as the context so you can cache your objects by url as well as by modelIdentifier.</p>
</div>
<div class="section" id="normalized-vs-denormalized-data">
<h2>Normalized vs Denormalized Data<a class="headerlink" href="#normalized-vs-denormalized-data" title="Permalink to this headline">¶</a></h2>
<p>All the models used in Rocket Data are denormalized. They always have a tree structure. This is useful because it means that models are always available and you can verify that they will never change. However, when you want to cache the models, it&#8217;s preferable to normalize the models and cache each node separately. This isn&#8217;t a requirement to using this library, but your cache won&#8217;t maintain full consistency unless you normalize your models.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="070_networking.html" class="btn btn-neutral float-right" title="Networking" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="050_models.html" class="btn btn-neutral" title="Models" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, LinkedIn.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>