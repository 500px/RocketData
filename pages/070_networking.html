

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Networking &mdash; Rocket Data 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Rocket Data 1.0 documentation" href="../index.html"/>
        <link rel="next" title="Updating Models" href="080_updatingModels.html"/>
        <link rel="prev" title="Cache Delegate" href="060_cacheDelegate.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Rocket Data
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="010_rocketData.html">Rocket Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="015_architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="020_requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="030_dataProviders.html">Data Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="040_setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="050_models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="060_cacheDelegate.html">Cache Delegate</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="080_updatingModels.html">Updating Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="090_otherFeatures.html">Other Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="095_projections.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="100_coreData.html">Core Data Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="110_threading.html">Threading</a></li>
<li class="toctree-l1"><a class="reference internal" href="120_testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="130_immutability.html">A Case for Immutability</a></li>
<li class="toctree-l1"><a class="reference internal" href="140_FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="150_futurePlans.html">Future Plans</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Rocket Data</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Networking</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/pages/070_networking.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="networking">
<h1>Networking<a class="headerlink" href="#networking" title="Permalink to this headline">Â¶</a></h1>
<p>Likely, you want to fetch data from the network in DataProviders. The library does not implement any networking features to keep the scope and API simple. However, you can easily add extensions to DataProviders to write generic networking methods.</p>
<p>Given a request class specific to your application (MyNetworkRequest) and a NetworkManager which returns a generic MyModelSuperClass, you could write this extension.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">extension</span> <span class="n">CollectionDataProvider</span> <span class="n">where</span> <span class="n">T</span><span class="o">:</span> <span class="n">MyModelSuperClass</span> <span class="p">{</span>
  <span class="n">func</span> <span class="n">fetchData</span><span class="p">(</span><span class="n">request</span><span class="o">:</span> <span class="n">MyNetworkRequest</span><span class="p">,</span>
                 <span class="nl">cacheKey:</span> <span class="n">String</span><span class="o">?</span><span class="p">,</span>
                 <span class="nl">fetchFromCache:</span> <span class="n">Bool</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
                 <span class="nl">completion:</span> <span class="p">(</span><span class="n">T</span><span class="o">?</span><span class="p">,</span> <span class="n">NSError</span><span class="o">?</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">())</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">fetchFromCache</span> <span class="p">{</span>
      <span class="n">fetchDataFromCache</span><span class="p">(</span><span class="n">cacheKey</span><span class="o">:</span> <span class="n">cacheKey</span><span class="p">)</span> <span class="p">{</span> <span class="n">models</span><span class="p">,</span> <span class="n">error</span> <span class="n">in</span>
        <span class="n">completion</span><span class="p">(</span><span class="n">models</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">NetworkManager</span><span class="p">.</span><span class="n">fetchCollection</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="o">:</span> <span class="p">[</span><span class="n">T</span><span class="p">]</span><span class="o">?</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="n">in</span>
      <span class="k">if</span> <span class="n">let</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span> <span class="p">{</span>
        <span class="n">self</span><span class="p">.</span><span class="n">setData</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">cacheKey</span><span class="o">:</span> <span class="n">cacheKey</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="n">completion</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this extension, we are fetching from the cache and network in parallel. Since we implement it as an extension, we can write custom logic here and any network stack. You can write a similar extension on DataProvider.</p>
<p>If the network returns before the cache, the cache data should be discarded. Rocket Data automatically handles this. If you <tt class="docutils literal"><span class="pre">setData</span></tt> while a cache request is in flight, it will discard the result of the cache.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="080_updatingModels.html" class="btn btn-neutral float-right" title="Updating Models" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="060_cacheDelegate.html" class="btn btn-neutral" title="Cache Delegate" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, LinkedIn.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>